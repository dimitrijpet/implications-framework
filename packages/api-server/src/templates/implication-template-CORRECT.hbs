// Auto-generated by Implications Framework
// Created: {{timestamp}}

class {{className}} {
  static xstateConfig = {
    id: '{{stateId}}',
    
    {{!-- ✅ Meta at TOP LEVEL with setup array --}}
    meta: {
      {{#if meta.status}}
      status: '{{meta.status}}',
      {{/if}}
      {{#if meta.platform}}
      platform: '{{meta.platform}}',
      {{/if}}
      {{#if meta.triggerAction}}
      triggerAction: '{{meta.triggerAction}}',
      {{/if}}
      {{#if meta.triggerButton}}
      triggerButton: '{{meta.triggerButton}}',
      {{/if}}
      {{#if meta.afterButton}}
      afterButton: '{{meta.afterButton}}',
      {{/if}}
      {{#if meta.previousButton}}
      previousButton: '{{meta.previousButton}}',
      {{/if}}
      {{#if meta.statusCode}}
      statusCode: '{{meta.statusCode}}',
      {{/if}}
      {{#if meta.statusNumber}}
      statusNumber: {{meta.statusNumber}},
      {{/if}}
      {{#if meta.notificationKey}}
      notificationKey: '{{meta.notificationKey}}',
      {{/if}}
      {{!-- ✅ Setup array for test generation --}}
      setup: [{
        testFile: 'tests/implications/{{category}}/{{className}}-{{#capitalize meta.platform}}{{meta.platform}}{{/capitalize}}-UNIT.spec.js',
        actionName: '{{#if meta.actionName}}{{meta.actionName}}{{else}}{{#camelCase stateId}}{{stateId}}{{/camelCase}}{{/if}}',
        platform: '{{meta.platform}}'
      }],
      {{#if meta.setupActions}}
      setupActions: [{{#each meta.setupActions}}'{{this}}'{{#unless @last}}, {{/unless}}{{/each}}],
      {{/if}}
      {{#if meta.requiredFields}}
      requiredFields: [{{#each meta.requiredFields}}'{{this}}'{{#unless @last}}, {{/unless}}{{/each}}]
      {{/if}}
    },
    
    {{!-- ✅ Transitions at TOP LEVEL (not nested in states) --}}
    on: {
      {{#if nextState}}
      {{nextEvent}}: {
        target: '{{nextState}}'
      }
      {{else}}
      // TODO: Add transitions here
      // Example: NEXT_EVENT: { target: 'next_state' }
      {{/if}}
    },
    
    {{!-- ✅ Entry at TOP LEVEL (plain object, not assign) --}}
    {{#if hasEntry}}
    entry: {
      {{#if meta.status}}
      status: '{{meta.status}}',
      statusLabel: '{{meta.statusLabel}}',
      {{/if}}
      // TODO: Add dynamic entry assignments here if needed
      // Example: updatedAt: new Date().toISOString()
    }
    {{/if}}
  };

  static mirrorsOn = {
    {{#if description}}
    description: '{{description}}',
    {{/if}}
    
    UI: {
      {{#if meta.platform}}
      {{meta.platform}}: {
        // TODO: Add UI screens for {{meta.platform}} platform
        // Example:
        // screenName: [{
        //   name: "screenName",
        //   visible: ['element1', 'element2'],
        //   hidden: ['element3'],
        //   checks: {
        //     text: {
        //       'elementId': 'Expected text'
        //     }
        //   }
        // }]
      }
      {{else}}
      // TODO: Add UI implications for each platform
      // web: { ... },
      // mobile: { ... }
      {{/if}}
    }
  };
  
  static meta = {
    {{#if meta.status}}status: '{{meta.status}}',{{/if}}
    {{#if meta.platform}}platform: '{{meta.platform}}',{{/if}}
    {{#if category}}category: '{{category}}',{{/if}}
    {{#if description}}description: '{{description}}'{{/if}}
  };
}

module.exports = {{className}};
