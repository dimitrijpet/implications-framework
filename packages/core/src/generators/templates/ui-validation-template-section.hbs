{{!-- 
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  UI VALIDATION SECTION - Two Modes
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  MODE 1 (useExpectImplication=true): Clean, uses ExpectImplication
  MODE 2 (useExpectImplication=false): Explicit inline expects
--}}

{{#if hasUIValidation}}
await test.step('Validate {{targetStatus}} State UI ({{platform}})', async () => {
  {{#if useExpectImplication}}
  {{!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MODE 1: ExpectImplication (CLEAN & RECOMMENDED)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• --}}
  
  // âœ… Validate UI using ExpectImplication
  // This automatically:
  // - Loads the POM
  // - Calls any functions defined in mirrorsOn
  // - Validates visible/hidden elements
  // - Checks text content
  
  {{#each validationScreens}}
  console.log('   ğŸ” Validating {{screenKey}}...');
  
  await ExpectImplication.validateImplications(
    {{../implClassName}}.mirrorsOn.UI.{{../platform}}.{{screenKey}},
    ctx.data,
    page
  );
  
  console.log('   âœ… {{screenKey}} validation passed');
  {{/each}}
  
  {{else}}
  {{!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MODE 2: Explicit Inline Expects (VERBOSE BUT GUARANTEED)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• --}}
  
  {{#each validationScreens}}
  {{#if hasFunctions}}
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ¯ {{screenKey}}: Call Functions & Store Results
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const screen = {{pomClassName}} ? new {{pomClassName}}(page) : null;
  
  {{#each functions}}
  // Call: {{signature}}
  const return{{pascalCase name}} = await screen.{{name}}({{#each parameterValues}}{{#if @first}}{{this}}{{else}}, {{this}}{{/if}}{{/each}});
  console.log('   âš¡ Called {{name}}() â†’ stored as return{{pascalCase name}}');
  {{/each}}
  
  {{/if}}
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // âœ… {{screenKey}}: Visibility & Text Checks
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  {{#if hasRegularFields}}
  // Regular fields (direct POM properties)
  {{#each visibleRegularFields}}
  await expect(screen.{{this}}).toBeVisible();
  {{/each}}
  {{#each hiddenRegularFields}}
  await expect(screen.{{this}}).toBeHidden();
  {{/each}}
  {{/if}}
  
  {{#if hasFunctionChecks}}
  // Function-based checks (using stored results)
  {{#each visibleFunctions}}
  await expect(return{{pascalCase this}}).toBeVisible();
  console.log('   âœ… return{{pascalCase this}} is visible');
  {{/each}}
  {{#each hiddenFunctions}}
  await expect(return{{pascalCase this}}).toBeHidden();
  console.log('   âœ… return{{pascalCase this}} is hidden');
  {{/each}}
  {{/if}}
  
  {{#if hasTextChecks}}
  // Text checks
  {{#each textChecks}}
  {{#if isFunction}}
  await expect(return{{pascalCase fieldName}}).toHaveText('{{expectedText}}');
  console.log('   âœ… return{{pascalCase fieldName}} has text: "{{expectedText}}"');
  {{else}}
  await expect(screen.{{fieldName}}).toHaveText('{{expectedText}}');
  console.log('   âœ… {{fieldName}} has text: "{{expectedText}}"');
  {{/if}}
  {{/each}}
  {{/if}}
  
  {{/each}}
  {{/if}}
});
{{/if}}
